<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Displaying diagrams</title>
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="../style.css">
  <link rel="icon" href="../favicon.svg" type="image/svg+xml">
 </head>
 <body>
</pre>
<h1 id="DisplayingDiagrams">Displaying diagrams</h1>
<p>Lets say we've generated some diagrams, like so:</p>
<pre><a class="tnb" href="https://reference.wolfram.com/language/ref/SetOptions.html" rel="nofollow">SetOptions</a>[<a class="tnb" href="https://reference.wolfram.com/language/ref/$Output.html" rel="nofollow">$Output</a>, <a class="tnb" href="https://reference.wolfram.com/language/ref/PageWidth.html" rel="nofollow">PageWidth</a> -&gt; <span class="tl">65</span>];
<a class="tnb" href="https://reference.wolfram.com/language/ref/$HistoryLength.html" rel="nofollow">$HistoryLength</a> = <span class="tl">2</span>;

<a class="tnb" href="https://reference.wolfram.com/language/ref/Get.html" rel="nofollow">Get</a>[<span class="ts">"alibrary.m"</span>];
<a class="tnb" href="https://reference.wolfram.com/language/ref/Get.html" rel="nofollow">Get</a>[<span class="tnv">$Apath</span> &lt;&gt; <span class="ts">"/amodel-qcd.m"</span>];

<span class="tnv">diagrams</span> = <a class="tnv" href="../alibrary.html#Diagrams">Diagrams</a>[{<span class="ts">"A"</span>}, {<span class="ts">"A"</span>}, <span class="tl">2</span>];</pre>
<p>Normally the diagrams would now be passed into <a href="../alibrary.html#Amplitude">Amplitude</a>
to apply Feyman rules to them; there are however two reasons
to additionally convert them into a viewable form: to debug
the Feynman rules and to prepare publications.</p>
<h1 id="QuickAmpDirtyDiagramViewing">Quick &amp; dirty diagram viewing</h1>
<p>There are two ways to view the obtained diagrams. One way is by
producing <code>.dot</code> files for them, using <code>graphviz</code> to convert
those into PDFs, and importing the PDFs into Mathematica.
This achieves a quick and dirty view of the diagram, suitable
for debugging:</p>
<pre><span class="tnv">diagrams</span> // <a class="tnb" href="https://reference.wolfram.com/language/ref/Map.html" rel="nofollow">Map</a>[<a class="tnv" href="../alibrary.html#DiagramViz">DiagramViz</a>]</pre>
<p>Note that the result of <a href="../alibrary.html#DiagramViz">DiagramViz</a> is a <code>Graphics[]</code>
object, and the Mathematica GUI frontend is needed to see
it.</p>
<h1 id="ExportingDiagramsToLatex">Exporting diagrams to LaTeX</h1>
<p>The other objective is to prepare publication-quality LaTeX
renderings of the diagrams. To that end, we have found it best
to use the <a href="https://github.com/pgf-tikz/pgf">TikZ</a> library in combination with the <a href="https://tikzit.github.io">TikZiT</a>
editor. To use this combination, first export any diagram to
a <code>.tikz</code> (LaTeX) file:</p>
<pre><a class="tnv" href="../utils.html#MkFile">MkFile</a>[<span class="ts">"diagram.tikz"</span>, <a class="tnv" href="../alibrary.html#DiagramToTikZ">DiagramToTikZ</a>[<span class="tnv">diagrams</span>[[<span class="tl">1</span>]]]];</pre>
<p>Then edit it with TikZiT by running <code>tikzit diagram.tikz</code>.
Make sure to load the <code>all.tiksztyles</code> style file that comes
with alibrary to be able to preview the diagrams insize TikZiT.</p>
<p>Once you're done, you can include <code>diagram.tikz</code> into any
LaTeX source (in text or in a formula) to get a picture of
the diagram. A minimal example would be:</p>
<pre class="doc">\<span class="tnv">documentclass</span>{<span class="tnv">article</span>}
\<span class="tnv">input</span>{<span class="tnv">all</span>.<span class="tnv">tikzdefs</span>}
\<span class="tnv">input</span>{<span class="tnv">all</span>.<span class="tnv">tikzstyles</span>}
\<span class="tnv">begin</span>{<span class="tnv">document</span>}
  \<span class="tnv">input</span>{<span class="tnv">diagram</span>.<span class="tnv">tikz</span>}
\<span class="tnv">end</span>{<span class="tnv">document</span>}
</pre>

<p>Note that both <code>all.tikzdefs</code> and <code>all.tikzstyles</code> are required
for this to work.</p>
<p>The result might looks like this:</p>
<p><img alt="\begin{tikzpicture}
\begin{pgfonlayer}{nodelayer}
\node [style=none] (-1) at (-1.5, 0) {};
\node [style=none] (-2) at (1.5, 0) {};
\node [style=dot] (1) at (-1, 0) {};
\node [style=dot] (2) at (1, 0) {};
\node [style=dot] (3) at (0, 1) {};
\node [style=dot] (4) at (0, -1) {};
\end{pgfonlayer}
\begin{pgfonlayer}{edgelayer}
\draw [style=incoming vector] (-1.center) to (1);
\draw [style=outgoing vector] (2) to (-2.center);
\draw [style=fermion] (3) to (1);
\draw [style=fermion] (1) to (4);
\draw [style=fermion] (2) to (3);
\draw [style=fermion] (4) to (2);
\draw [style=gluon] (4) to (3);
\end{pgfonlayer}
\end{tikzpicture}" class="display" style="vertical-align:-26.17896423339844pt" src="data:image/svg+xml,%3Csvg%20width%3D%2287.798pt%22%20height%3D%2260.112pt%22%20version%3D%221.1%22%20viewBox%3D%220%200%2087.798%2060.112%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cdefs%3E%3CclipPath%20id%3D%22k%22%3E%3Cpath%20d%3D%22m0%200h43v60.113h-43z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22h%22%3E%3Cpath%20d%3D%22m45%200h42.797v60.113h-42.797z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22g%22%3E%3Cpath%20d%3D%22m59%2013h28.797v34h-28.797z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22f%22%3E%3Cpath%20d%3D%22m0%206h68v54.113h-68z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22e%22%3E%3Cpath%20d%3D%22m2%2016h56v44.113h-56z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22d%22%3E%3Cpath%20d%3D%22m20%200h67.797v54h-67.797z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22c%22%3E%3Cpath%20d%3D%22m20%206h67.797v54.113h-67.797z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22b%22%3E%3Cpath%20d%3D%22m30%2016h56v44.113h-56z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22a%22%3E%3Cpath%20d%3D%22m13%200h62v60.113h-62z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22j%22%3E%3Cpath%20d%3D%22m27%200h34v60.113h-34z%22/%3E%3C/clipPath%3E%3CclipPath%20id%3D%22i%22%3E%3Cpath%20d%3D%22m37%2051h14v9.1133h-14z%22/%3E%3C/clipPath%3E%3C/defs%3E%3Cg%20clip-path%3D%22url%28%23k%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-42.52%200.0013125c1.2461%200%201.8672%202.4883%203.1133%202.4883%200.90234%200%201.6797-1.2148%202.4922-2.4883%200.80859-1.2773%201.5859-2.4922%202.4883-2.4922%201.2461%200%201.8672%202.4922%203.1133%202.4922h1.6406%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3C/g%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-42.52%200.0013125c1.2461%200%201.8672%202.4883%203.1133%202.4883%200.90234%200%201.6797-1.2148%202.4922-2.4883%200.80859-1.2773%201.5859-2.4922%202.4883-2.4922%201.2461%200%201.8672%202.4922%203.1133%202.4922h1.6406%22%20fill%3D%22none%22%20stroke%3D%22%23656565%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3Cg%20clip-path%3D%22url%28%23h%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m29.671%200.0013125c1.2461%200%201.8711%202.4883%203.1172%202.4883%200.89844%200%201.6758-1.2148%202.4883-2.4883%200.8125-1.2773%201.5898-2.4922%202.4922-2.4922%201.2461%200%201.8672%202.4922%203.1133%202.4922h1.6367%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3C/g%3E%3Cg%20clip-path%3D%22url%28%23g%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m29.671%200.0013125c1.2461%200%201.8711%202.4883%203.1172%202.4883%200.89844%200%201.6758-1.2148%202.4883-2.4883%200.8125-1.2773%201.5898-2.4922%202.4922-2.4922%201.2461%200%201.8672%202.4922%203.1133%202.4922h1.6367%22%20fill%3D%22none%22%20stroke%3D%22%23656565%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3C/g%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-4.4615%2023.888-19.426-19.43%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3Cpath%20d%3D%22m38.383%205.8164%201.0547-1.0547%203.5234-2.1133-2.1133%203.5195-1.0586%201.0586z%22%20fill%3D%22%23fff%22/%3E%3Cpath%20d%3D%22m21.07%2025.949-1.0586%201.0547-3.5234%202.1133%202.1133-3.5195%201.0586-1.0586z%22%20fill%3D%22%23fff%22/%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-0.93806%2027.408-26.473-26.469%22%20fill%3D%22none%22%20stroke%3D%22%23af2426%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3Cpath%20d%3D%22m27.086%2018.52%204.9023-1.6328-2.8594-0.40625-0.40625-2.8633%22%20fill%3D%22%23af2426%22/%3E%3Cg%20clip-path%3D%22url%28%23f%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-23.887-4.4596%2019.426-19.426%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3C/g%3E%3Cpath%20d%3D%22m19.66%2035.574-1.0586-1.0586-2.1133-3.5234%203.5234%202.1133%201.0586%201.0586z%22%20fill%3D%22%23fff%22/%3E%3Cpath%20d%3D%22m39.789%2052.887%201.0586%201.0547%202.1133%203.5234-3.5234-2.1133-1.0547-1.0586z%22%20fill%3D%22%23fff%22/%3E%3Cg%20clip-path%3D%22url%28%23e%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-27.411-0.93619%2026.473-26.473%22%20fill%3D%22none%22%20stroke%3D%22%23af2426%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3C/g%3E%3Cpath%20d%3D%22m32.363%2046.867-1.6328-4.9023-0.41016%202.8594-2.8594%200.41016%22%20fill%3D%22%23af2426%22/%3E%3Cg%20clip-path%3D%22url%28%23d%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m23.886%204.4583-19.426%2019.43%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3C/g%3E%3Cpath%20d%3D%22m68.137%2024.539%201.0586%201.0586%202.1133%203.5195-3.5234-2.1133-1.0547-1.0547z%22%20fill%3D%22%23fff%22/%3E%3Cpath%20d%3D%22m48.008%207.2266-1.0586-1.0586-2.1133-3.5195%203.5234%202.1133%201.0547%201.0547z%22%20fill%3D%22%23fff%22/%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m27.41%200.93881-26.473%2026.469%22%20fill%3D%22none%22%20stroke%3D%22%23af2426%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3Cpath%20d%3D%22m55.434%2013.242%201.6328%204.9062%200.41016-2.8633%202.8594-0.40625%22%20fill%3D%22%23af2426%22/%3E%3Cg%20clip-path%3D%22url%28%23c%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m4.4604-23.885%2019.426%2019.426%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3C/g%3E%3Cpath%20d%3D%22m49.414%2054.293-1.0547%201.0586-3.5234%202.1133%202.1133-3.5234%201.0586-1.0547z%22%20fill%3D%22%23fff%22/%3E%3Cpath%20d%3D%22m66.73%2034.164%201.0547-1.0586%203.5234-2.1133-2.1133%203.5234-1.0586%201.0586z%22%20fill%3D%22%23fff%22/%3E%3Cg%20clip-path%3D%22url%28%23b%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m0.93694-27.409%2026.473%2026.473%22%20fill%3D%22none%22%20stroke%3D%22%23af2426%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3C/g%3E%3Cpath%20d%3D%22m60.711%2041.59-4.9023%201.6367%202.8594%200.40625%200.41016%202.8594%22%20fill%3D%22%23af2426%22/%3E%3Cg%20clip-path%3D%22url%28%23a%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-5.625e-4%20-27.022c-1.3828%200.58203-2.4883%202.8281-2.4883%205.4805%200%202.6562%201.1055%204.8984%202.4883%205.4805%201.3828%200.58203%202.4922-0.5%202.4922-1.9922%200-1.4922-1.1094-2.5742-2.4922-1.9922-1.3828%200.58203-2.4883%202.8242-2.4883%205.4766%200%202.6562%201.1055%204.8984%202.4883%205.4805s2.4922-0.5%202.4922-1.9922c0-1.4922-1.1094-2.5742-2.4922-1.9922s-2.4883%202.8242-2.4883%205.4805c0%202.6523%201.1055%204.8984%202.4883%205.4805%201.3828%200.57812%202.4922-0.50391%202.4922-1.9961%200-1.4922-1.1094-2.5703-2.4922-1.9922-1.3828%200.58203-2.4883%202.8281-2.4883%205.4805%200%202.6562%201.1055%204.8984%202.4883%205.4805%201.3828%200.58203%202.4922-0.5%202.4922-1.9922%200-1.4922-1.1094-2.5742-2.4922-1.9922-1.3828%200.58203-2.4883%202.8242-2.4883%205.4766%200%202.6562%201.1055%204.8984%202.4883%205.4805s2.4922-0.5%202.4922-1.9922c0-1.4922-1.1094-2.5742-2.4922-1.9922s-2.4883%202.8242-2.4883%205.4805c0%202.6523%201.1055%204.8984%202.4883%205.4805%201.3828%200.57812%202.4922-0.50391%202.4922-1.9961%200-1.4922-1.1094-2.5703-2.4922-1.9922-1.3828%200.58203-2.4883%202.8281-2.4883%205.4805%200%202.6562%201.1055%204.8984%202.4883%205.4805v1.2383%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.9926%22/%3E%3C/g%3E%3Cg%20clip-path%3D%22url%28%23j%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-5.625e-4%20-27.022c-1.3828%200.58203-2.4883%202.8281-2.4883%205.4805%200%202.6562%201.1055%204.8984%202.4883%205.4805%201.3828%200.58203%202.4922-0.5%202.4922-1.9922%200-1.4922-1.1094-2.5742-2.4922-1.9922-1.3828%200.58203-2.4883%202.8242-2.4883%205.4766%200%202.6562%201.1055%204.8984%202.4883%205.4805s2.4922-0.5%202.4922-1.9922c0-1.4922-1.1094-2.5742-2.4922-1.9922s-2.4883%202.8242-2.4883%205.4805c0%202.6523%201.1055%204.8984%202.4883%205.4805%201.3828%200.57812%202.4922-0.50391%202.4922-1.9961%200-1.4922-1.1094-2.5703-2.4922-1.9922-1.3828%200.58203-2.4883%202.8281-2.4883%205.4805%200%202.6562%201.1055%204.8984%202.4883%205.4805%201.3828%200.58203%202.4922-0.5%202.4922-1.9922%200-1.4922-1.1094-2.5742-2.4922-1.9922-1.3828%200.58203-2.4883%202.8242-2.4883%205.4766%200%202.6562%201.1055%204.8984%202.4883%205.4805s2.4922-0.5%202.4922-1.9922c0-1.4922-1.1094-2.5742-2.4922-1.9922s-2.4883%202.8242-2.4883%205.4805c0%202.6523%201.1055%204.8984%202.4883%205.4805%201.3828%200.57812%202.4922-0.50391%202.4922-1.9961%200-1.4922-1.1094-2.5703-2.4922-1.9922-1.3828%200.58203-2.4883%202.8281-2.4883%205.4805%200%202.6562%201.1055%204.8984%202.4883%205.4805v1.2383%22%20fill%3D%22none%22%20stroke%3D%22%23af2426%22%20stroke-linecap%3D%22square%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.99628%22/%3E%3C/g%3E%3Cg%3E%3Cg%20stroke%3D%22%23000%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.3985%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m-27.219%200.0013125c0%200.62109-0.50391%201.125-1.1289%201.125-0.62109%200-1.125-0.50391-1.125-1.125%200-0.625%200.50391-1.1289%201.125-1.1289%200.625%200%201.1289%200.50391%201.1289%201.1289z%22/%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m29.472%200.0013125c0%200.62109-0.50391%201.125-1.125%201.125-0.62109%200-1.1289-0.50391-1.1289-1.125%200-0.625%200.50781-1.1289%201.1289-1.1289%200.62109%200%201.125%200.50391%201.125%201.1289z%22/%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m1.1283%2028.345c0%200.625-0.50391%201.1289-1.1289%201.1289-0.62109%200-1.125-0.50391-1.125-1.1289%200-0.62109%200.50391-1.125%201.125-1.125%200.625%200%201.1289%200.50391%201.1289%201.125z%22/%3E%3C/g%3E%3Cpath%20d%3D%22m45.027%2058.402c0-0.62109-0.50391-1.125-1.1289-1.125-0.62109%200-1.125%200.50391-1.125%201.125s0.50391%201.1289%201.125%201.1289c0.625%200%201.1289-0.50781%201.1289-1.1289z%22/%3E%3C/g%3E%3Cg%20clip-path%3D%22url%28%23i%29%22%3E%3Cpath%20transform%3D%22matrix%281%2C0%2C0%2C-1%2C43.899%2C30.056%29%22%20d%3D%22m1.1283-28.346c0%200.62109-0.50391%201.125-1.1289%201.125-0.62109%200-1.125-0.50391-1.125-1.125%200-0.62109%200.50391-1.1289%201.125-1.1289%200.625%200%201.1289%200.50781%201.1289%201.1289z%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%22.3985%22/%3E%3C/g%3E%3C/svg%3E"/></p>
  </body>
</html>
